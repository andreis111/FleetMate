<%- include('partials/headerDriver', {user: user}) -%>

<main id="main" class="main">
  <div class="pagetitle">
    
    <h1>Spreadsheet details </h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/driver">Home</a></li>
        <li class="breadcrumb-item"><a href="/driver/spreadsheet">Spreadsheets</a></li>
        <li class="breadcrumb-item active">Trips</li>
      </ol>
  </nav>
  <h1><%= week.startDate%> - <%= week.endDate%></h1>
  
    <p>Add details for each individual job:</p>

    <div class="row justify-content-center mt-5">

      <!-- Table to show individual trips made by the driver -->
      <table>
        <tr>
          <th>Start at</th>
          <th>Start date</th>
          <th>End at</th>
          <th>End Date</th>
          <th>Km</th>
          <th>Other costs</th>
          <th>Fuel</th>
          <th>Notes</th>
        </tr>
        <form action="/driver/spreadsheet/createIndividual/<%= week.id%>" method="POST">
          <tr>
            <td><input type="text" id="startLoc" name="startLoc" class="form-control form-control-sm"></td>
            <td><input type="date" id="startDate" name="startDate" class="form-control form-control-sm"></td>
            <td><input type="text" id="endLoc" name="endLoc" class="form-control form-control-sm"></td>
            <td><input type="date" id="endDate" name="endDate" class="form-control form-control-sm"></td>
            <td><input type="number" id="km" name="km" required class="form-control form-control-sm" placeholder="Nums only"></td>
            <td><input type="number" id="otherCosts" name="otherCosts" class="form-control form-control-sm" placeholder="Nums only"></td>
            <td><input type="number" id="fuel" name="fuel" class="form-control form-control-sm" placeholder="Nums only"></td>
            <td><input type="text" id="notes" name="notes" class="form-control form-control-sm"></td>
            <td class="text-right"><button type="submit" class="btn btn-primary btn-sm"><i class="bi bi-plus-lg"></i></button></td>
          </tr>
          
        </form>
        <% for(const individual of individuals) {%>
          <tr>
            <td><%= individual.startLoc%></td>
            <td><%= individual.startDate%></td>
            <td><%= individual.endLoc%></td>
            <td><%= individual.endDate%></td>
            <td><%= individual.km%></td>
            <td><%= individual.otherCosts%></td>
            <td><%= individual.fuel%></td>
            <td><%= individual.notes%></td>
          </tr>
        <% } %>

        <!-- Form inside the table to add more trips -->
        
        <!-- Table footer that receives Total km, costs and fuel from controller (function in controller) -->
        <tfoot>
          <tr>
            <td colspan="4"><strong>Total:</strong> </td>
            <td><%=totalKm%></td>
            <td><%=totalCosts%></td>
            <td><%=totalFuel%></td>
          </tr>
        </tfoot>
      </table>
        

    </div>
  </div>
</main>

<a href="/logout">Logout</a>


<%- include('partials/footer') -%>